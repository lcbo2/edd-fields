{"version":3,"sources":["field-repeater.js"],"names":["$","EDD_Fields_Repeater","init","this","fields","sortable","handle","update","reIndex","on","row","clone","count","parent","find","length","not","val","attr","each","name","replace","parseInt","insertAfter","document","body","rows","closest","remove","rowIndex","children","jQuery"],"mappings":"CAAA,SAAYA,GAER,GAAIC,IAEAC,KAAM,WACFC,KAAKC,UAGTA,OAAQ,WAEJJ,EAAG,8BAA+BK,UAC9BC,OAAQ,UACRC,OAAQ,WACJN,EAAoBO,aAK5BR,EAAG,uBAAwBS,GAAI,QAAS,WACpC,GAAIC,GAAMV,EAAG,gCACTW,EAAQD,EAAIC,QACZC,EAAQF,EAAIG,SAASC,KAAM,MAAOC,MActC,OAbAJ,GAAMG,KAAM,YAAaE,IAAK,yBAA0BC,IAAK,IAC7DN,EAAMG,KAAM,wBAAyBI,KAAM,WAAW,GACtDP,EAAMG,KAAM,iBAAkBK,KAAM,WAChC,GAAIC,GAAOpB,EAAGG,MAAOe,KAAM,OAC3BE,GAAOA,EAAKC,QAAS,YAAa,IAAMC,SAAUV,GAAU,KAC5DZ,EAAGG,MAAOe,KAAM,OAAQE,GAAOF,KAAM,KAAME,KAE/CT,EAAMG,KAAM,SAAUK,KAAM,WACxB,GAAIC,GAAOpB,EAAGG,MAAOe,KAAM,MAC3BE,GAAOA,EAAKC,QAAS,YAAa,IAAMC,SAAUV,GAAU,KAC5DZ,EAAGG,MAAOe,KAAM,MAAOE,KAE3BT,EAAMY,YAAab,IACZ,IAIXV,EAAGwB,SAASC,MAAOhB,GAAI,QAAS,uCAAwC,WAEpE,GAAIiB,GAAO1B,EAAG,mCACVY,EAAYc,EAAKX,MAerB,OAbe,KAAVH,GACDZ,EAAG,+BAAgCiB,IAAK,IACxCjB,EAAG,2CAA4CiB,IAAK,IACpDjB,EAAG,6CAA8CiB,IAAK,IACtDjB,EAAG,+CAAgDkB,KAAM,WAAW,IAGpElB,EAAGG,MAAOwB,QAAS,MAAOC,SAI9B3B,EAAoBO,WAEb,KAKfA,QAAS,WAELR,EAAG,2BAA4BmB,KAAM,SAAUU,GAC3C7B,EAAGG,MAAO2B,WAAWhB,KAAM,iBAAkBK,KAAM,WAC/C,GAAIC,GAAOpB,EAAGG,MAAOe,KAAM,OAC3BE,GAAOA,EAAKC,QAAS,YAAa,KAAQQ,EAAW,GAAM,KAC3D7B,EAAGG,MAAOe,KAAM,OAAQE,GAAOF,KAAM,KAAME,QAQ3DnB,GAAoBC,QAEnB6B","file":"admin.js","sourcesContent":["( function( $ ) {\n\n    var EDD_Fields_Repeater = {\n\n        init: function() {\n            this.fields();\n        },\n\n        fields: function() {\n\n            $( '#edd-fields-repeater tbody' ).sortable( {\n                handle: '.handle',\n                update: function() {\n                    EDD_Fields_Repeater.reIndex(); \n                }\n            } );\n\n            // Insert EDD Fields row\n            $( '#edd-fields-add-row' ).on( 'click', function() {\n                var row = $( '#edd-fields-repeater tr:last' );\n                var clone = row.clone();\n                var count = row.parent().find( 'tr' ).length;\n                clone.find( 'td input' ).not( ':input[type=checkbox]' ).val( '' );\n                clone.find( 'td [type=\"checkbox\"]' ).attr( 'checked', false);\n                clone.find( 'input, select' ).each( function() {\n                    var name = $( this ).attr( 'name' );\n                    name = name.replace( /\\[(\\d+)\\]/, '[' + parseInt( count ) + ']' );\n                    $( this ).attr( 'name', name ).attr( 'id', name );\n                } );\n                clone.find( 'label' ).each( function() {\n                    var name = $( this ).attr( 'for' );\n                    name = name.replace( /\\[(\\d+)\\]/, '[' + parseInt( count ) + ']' );\n                    $( this ).attr( 'for', name );\n                } );\n                clone.insertAfter( row );\n                return false;\n            } );\n\n            // Remove EDD Fields row\n            $( document.body ).on( 'click', '#edd-fields-repeater .edd-remove-row', function() {\n\n                var rows = $( '#edd-fields-repeater tr:visible' );\n                var count     = rows.length;\n\n                if ( count === 2 ) {\n                    $( '#edd-fields-repeater select' ).val( '' );\n                    $( '#edd-fields-repeater input[type=\"text\"]' ).val( '' );\n                    $( '#edd-fields-repeater input[type=\"number\"]' ).val( '' );\n                    $( '#edd-fields-repeater input[type=\"checkbox\"]' ).attr( 'checked', false);\n                }\n                else {\n                    $( this ).closest( 'tr' ).remove();\n                }\n\n                /* re-index after deleting */\n                EDD_Fields_Repeater.reIndex();\n\n                return false;\n            } );\n\n        },\n\n        reIndex: function() {\n\n            $( '#edd-fields-repeater tr' ).each( function( rowIndex ) {\n                $( this ).children().find( 'input, select' ).each( function() {\n                    var name = $( this ).attr( 'name' );\n                    name = name.replace( /\\[(\\d+)\\]/, '[' + ( rowIndex - 1 ) + ']' );\n                    $( this ).attr( 'name', name ).attr( 'id', name );\n                } );\n            } );\n\n        }\n\n    };\n\n    EDD_Fields_Repeater.init();\n\n} )( jQuery );"],"sourceRoot":"/source/"}