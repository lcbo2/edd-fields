"use strict";!function(e){var t=function(e){return e},n=function(t){return e.isArray(t)},r=function(e){return!n(e)&&e instanceof Object},i=function(t,n){return e.inArray(n,t)},a=function(e,t){return-1!==i(e,t)},u=function(e,t){for(var n in e)e.hasOwnProperty(n)&&t(e[n],n,e)},c=function(e){return e[e.length-1]},o=function(e){return Array.prototype.slice.call(e)},s=function(){var e={};return u(o(arguments),function(t){u(t,function(t,n){e[n]=t})}),e},d=function(e,t){var n=[];return u(e,function(e,r,i){n.push(t(e,r,i))}),n},l=function(e,t,n){var r={};return u(e,function(e,i,a){i=n?n(i,e):i,r[i]=t(e,i,a)}),r},f=function(e,t,r){return n(e)?d(e,t):l(e,t,r)},p=function(e,t){return f(e,function(e){return e[t]})},h=function(e,t,n){return f(e,function(e,r){return e[t].apply(e,n||[])})},m=function(e){e=e||{};var t={};return e.publish=function(e,n){u(t[e],function(e){e(n)})},e.subscribe=function(e,n){t[e]=t[e]||[],t[e].push(n)},e.unsubscribe=function(e){u(t,function(t){var n=i(t,e);-1!==n&&t.splice(n,1)})},e};!function(e){var t=function(e,t){var n=m(),r=e.$;return n.getType=function(){throw'implement me (return type. "text", "radio", etc.)'},n.$=function(e){return e?r.find(e):r},n.disable=function(){n.$().prop("disabled",!0),n.publish("isEnabled",!1)},n.enable=function(){n.$().prop("disabled",!1),n.publish("isEnabled",!0)},t.equalTo=function(e,t){return e===t},t.publishChange=function(){var e;return function(r,i){var a=n.get();t.equalTo(a,e)||n.publish("change",{e:r,domElement:i}),e=a}}(),n},o=function(e,n){var r=t(e,n);return r.get=function(){return r.$().val()},r.set=function(e){r.$().val(e)},r.clear=function(){r.set("")},n.buildSetter=function(e){return function(t){e.call(r,t)}},r},s=function(e,t){e=n(e)?e:[e],t=n(t)?t:[t];var r=!0;return e.length!==t.length?r=!1:u(e,function(e){a(t,e)||(r=!1)}),r},d=function(e){var t={},n=o(e,t);return n.getType=function(){return"button"},n.$().on("change",function(e){t.publishChange(e,this)}),n},l=function(t){var r={},i=o(t,r);return i.getType=function(){return"checkbox"},i.get=function(){var t=[];return i.$().filter(":checked").each(function(){t.push(e(this).val())}),t},i.set=function(t){t=n(t)?t:[t],i.$().each(function(){e(this).prop("checked",!1)}),u(t,function(e){i.$().filter('[value="'+e+'"]').prop("checked",!0)})},r.equalTo=s,i.$().change(function(e){r.publishChange(e,this)}),i},f=function(e){var t={},n=x(e,t);return n.getType=function(){return"email"},n},p=function(n){var r={},i=t(n,r);return i.getType=function(){return"file"},i.get=function(){return c(i.$().val().split("\\"))},i.clear=function(){this.$().each(function(){e(this).wrap("<form>").closest("form").get(0).reset(),e(this).unwrap()})},i.$().change(function(e){r.publishChange(e,this)}),i},v=function(e){var t={},n=o(e,t);return n.getType=function(){return"hidden"},n.$().change(function(e){t.publishChange(e,this)}),n},g=function(n){var r={},i=t(n,r);return i.getType=function(){return"file[multiple]"},i.get=function(){var e,t=i.$().get(0).files||[],n=[];for(e=0;e<(t.length||0);e+=1)n.push(t[e].name);return n},i.clear=function(){this.$().each(function(){e(this).wrap("<form>").closest("form").get(0).reset(),e(this).unwrap()})},i.$().change(function(e){r.publishChange(e,this)}),i},y=function(e){var t={},r=o(e,t);return r.getType=function(){return"select[multiple]"},r.get=function(){return r.$().val()||[]},r.set=function(e){r.$().val(""===e?[]:n(e)?e:[e])},t.equalTo=s,r.$().change(function(e){t.publishChange(e,this)}),r},b=function(e){var t={},n=x(e,t);return n.getType=function(){return"password"},n},$=function(t){var n={},r=o(t,n);return r.getType=function(){return"radio"},r.get=function(){return r.$().filter(":checked").val()||null},r.set=function(t){t?r.$().filter('[value="'+t+'"]').prop("checked",!0):r.$().each(function(){e(this).prop("checked",!1)})},r.$().change(function(e){n.publishChange(e,this)}),r},k=function(e){var t={},n=o(e,t);return n.getType=function(){return"range"},n.$().change(function(e){t.publishChange(e,this)}),n},w=function(e){var t={},n=o(e,t);return n.getType=function(){return"select"},n.$().change(function(e){t.publishChange(e,this)}),n},x=function(e){var t={},n=o(e,t);return n.getType=function(){return"text"},n.$().on("change keyup keydown",function(e){t.publishChange(e,this)}),n},C=function(e){var t={},n=o(e,t);return n.getType=function(){return"textarea"},n.$().on("change keyup keydown",function(e){t.publishChange(e,this)}),n},T=function(e){var t={},n=x(e,t);return n.getType=function(){return"url"},n},j=function(t){var n={},a=t.$,c=t.constructorOverride||{button:d,text:x,url:T,email:f,password:b,range:k,textarea:C,select:w,"select[multiple]":y,radio:$,checkbox:l,file:p,"file[multiple]":g,hidden:v},o=function(t,i){var u=r(i)?i:a.find(i);u.each(function(){var r=e(this).attr("name");n[r]=c[t]({$:e(this)})})},s=function h(t,o){var h=[],s=r(o)?o:a.find(o);r(o)?n[s.attr("name")]=c[t]({$:s}):(s.each(function(){-1===i(h,e(this).attr("name"))&&h.push(e(this).attr("name"))}),u(h,function(e){n[e]=c[t]({$:a.find('input[name="'+e+'"]')})}))};return a.is("input, select, textarea")?a.is('input[type="button"], button, input[type="submit"]')?o("button",a):a.is("textarea")?o("textarea",a):a.is('input[type="text"]')||a.is("input")&&!a.attr("type")?o("text",a):a.is('input[type="password"]')?o("password",a):a.is('input[type="email"]')?o("email",a):a.is('input[type="url"]')?o("url",a):a.is('input[type="range"]')?o("range",a):a.is("select")?a.is("[multiple]")?o("select[multiple]",a):o("select",a):a.is('input[type="file"]')?a.is("[multiple]")?o("file[multiple]",a):o("file",a):a.is('input[type="hidden"]')?o("hidden",a):a.is('input[type="radio"]')?s("radio",a):a.is('input[type="checkbox"]')?s("checkbox",a):o("text",a):(o("button",'input[type="button"], button, input[type="submit"]'),o("text",'input[type="text"]'),o("password",'input[type="password"]'),o("email",'input[type="email"]'),o("url",'input[type="url"]'),o("range",'input[type="range"]'),o("textarea","textarea"),o("select","select:not([multiple])"),o("select[multiple]","select[multiple]"),o("file",'input[type="file"]:not([multiple])'),o("file[multiple]",'input[type="file"][multiple]'),o("hidden",'input[type="hidden"]'),s("radio",'input[type="radio"]'),s("checkbox",'input[type="checkbox"]')),n};e.fn.inputVal=function(t){var n=e(this),r=j({$:n});return n.is("input, textarea, select")?"undefined"==typeof t?r[n.attr("name")].get():(r[n.attr("name")].set(t),n):"undefined"==typeof t?h(r,"get"):(u(t,function(e,t){r[t].set(e)}),n)},e.fn.inputOnChange=function(t){var n=e(this),r=j({$:n});return u(r,function(e){e.subscribe("change",function(e){t.call(e.domElement,e.e)})}),n},e.fn.inputDisable=function(){var t=e(this);return h(j({$:t}),"disable"),t},e.fn.inputEnable=function(){var t=e(this);return h(j({$:t}),"enable"),t},e.fn.inputClear=function(){var t=e(this);return h(j({$:t}),"clear"),t}}(jQuery),e.fn.repeaterVal=function(){var t=function r(e){var r=[];return u(e,function(e,t){var n=[];"undefined"!==t&&(n.push(t.match(/^[^\[]*/)[0]),n=n.concat(f(t.match(/\[[^\]]*\]/g),function(e){return e.replace(/[\[\]]/g,"")})),r.push({val:e,key:n}))}),r},n=function i(e){if(1===e.length&&(0===e[0].key.length||1===e[0].key.length&&!e[0].key[0]))return e[0].val;u(e,function(e){e.head=e.key.shift()});var t,n=function(){var t={};return u(e,function(e){t[e.head]||(t[e.head]=[]),t[e.head].push(e)}),t}();return/^[0-9]+$/.test(e[0].head)?(t=[],u(n,function(e){t.push(i(e))})):(t={},u(n,function(e,n){t[n]=i(e)})),t};return n(t(e(this).inputVal()))},e.fn.repeater=function(n){return n=n||{},e(this).each(function(){var r=e(this),i=n.show||function(){e(this).show()},a=n.hide||function(e){e()},o=r.find("[data-repeater-list]").first(),d=function(t,n){return t.filter(function(){return!n||0===e(this).closest(p(n,"selector").join(",")).length})},l=function(){return d(o.find("[data-repeater-item]"),n.repeaters)},h=o.find("[data-repeater-item]").first().clone().hide(),m=e(this).find("[data-repeater-item]").first().find("[data-repeater-delete]");n.isFirstItemUndeletable&&m&&m.remove();var v=function(){var e=o.data("repeater-list");return n.$parent?n.$parent.data("item-name")+"["+e+"]":e},g=function(t){n.repeaters&&t.each(function(){var t=e(this);u(n.repeaters,function(e){t.find(e.selector).repeater(s(e,{$parent:t}))})})},y=function(e,t,n){e&&u(e,function(e){n.call(t.find(e.selector)[0],e)})},b=function w(t,n,r){t.each(function(t){var i=e(this);i.data("item-name",n+"["+t+"]"),d(i.find("[name]"),r).each(function(){var a=e(this),u=a.attr("name").match(/\[[^\]]+\]/g),o=u?c(u).replace(/\[|\]/g,""):a.attr("name"),s=n+"["+t+"]["+o+"]"+(a.is(":checkbox")||a.attr("multiple")?"[]":"");a.attr("name",s),y(r,i,function(r){var i=e(this);w(d(i.find("[data-repeater-item]"),r.repeaters||[]),n+"["+t+"]["+i.find("[data-repeater-list]").first().data("repeater-list")+"]",r.repeaters)})})}),o.find("input[name][checked]").removeAttr("checked").prop("checked",!0)};b(l(),v(),n.repeaters),g(l()),n.ready&&n.ready(function(){b(l(),v(),n.repeaters)});var $=function(){var r=function i(n,r,a){if(r){var u={};d(n.find("[name]"),a).each(function(){var t=e(this).attr("name").match(/\[([^\]]*)(\]|\]\[\])$/)[1];u[t]=e(this).attr("name")}),n.inputVal(f(r,t,function(e){return u[e]}))}y(a,n,function(t){var n=e(this);d(n.find("[data-repeater-item]"),t.repeaters).each(function(){i(e(this),t.defaultValues,t.repeaters||[])})})};return function(t){o.append(t),b(l(),v(),n.repeaters),t.find("[name]").each(function(){e(this).inputClear()}),r(t,n.defaultValues,n.repeaters)}}(),k=function(){var e=h.clone();$(e),n.repeaters&&g(e),i.call(e.get(0))};r.children().each(function(){e(this).is("[data-repeater-list]")||0!==e(this).find("[data-repeater-list]").length||(e(this).is("[data-repeater-create]")?e(this).click(k):0!==e(this).find("[data-repeater-create]").length&&e(this).find("[data-repeater-create]").click(k))}),o.on("click","[data-repeater-delete]",function(){var t=e(this).closest("[data-repeater-item]").get(0);a.call(t,function(){e(t).remove(),b(l(),v(),n.repeaters)})})}),this}}(jQuery),function(e){function t(){var t=/value="(#(?:[0-9a-f]{3}){1,2})"/i;e(".edd-repeater .edd-color-picker").length&&e(".edd-repeater").each(function(n,r){e(r).find(".edd-repeater-item.opened").each(function(n,r){e(r).find(".edd-color-picker").each(function(n,r){var i=t.exec(e(r)[0].outerHTML)[1];e(r).val(i).attr("value",i).wpColorPicker()})})})}function n(){e(".edd-repeater .edd-chosen").length&&e(".edd-repeater").each(function(t,n){e(n).find(".edd-repeater-item.opened").each(function(t,n){e(n).find(".edd-chosen").select2({width:"100%",templateResult:r,templateSelection:r,containerCssClass:"edd-fields-select2 select2-container",dropdownCssClass:"edd-fields-select2 select2-container",escapeMarkup:function(e){return e}})})})}function r(e){arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.text+'<span class="icon '+e.id+'"></span>'}var i=e("[data-edd-repeater]");if(i.length){t(),n();var a=function(){e(this).find(".repeater-header h2 span.title").html(e(this).find(".repeater-header h2").data("repeater-collapsable-default"));var r=e(this).closest("[data-edd-repeater]"),i=e(this).find(".nested-repeater");e(i).each(function(t,n){var i=e(n).find(".edd-repeater-item").get().reverse();return 1==i.length||void e(i).each(function(t,n){return t!=i.length-1&&(e(n).stop().slideUp(300,function(){e(this).remove()}),void e(r).trigger("edd-nested-repeater-cleanup",[e(n)]))})}),e(this).addClass("opened").removeClass("closed").stop().slideDown(),t(),n(),e(r).trigger("edd-repeater-add",[e(this)])},u=function(){var t=e(this).closest("[data-edd-repeater]");e(this).stop().slideUp(300,function(){e(this).remove()}),e(t).trigger("edd-repeater-remove",[e(this)])};i.each(function(){var r=e(this),i=r.find("[data-repeater-dummy]");r.repeater({repeaters:[{selector:".nested-repeater",show:a,hide:u}],show:a,hide:u,ready:function(e){r.find("tbody").on("sortupdate",e)}}),i.length&&i.remove(),"undefined"!=typeof r.attr("data-repeater-sortable")&&r.find(".edd-repeater-list").sortable({axis:"y",handle:"[data-repeater-item-handle]",forcePlaceholderSize:!0,update:function(e,r){t(),n()}}),"undefined"!=typeof r.attr("data-repeater-collapsable")&&r.find(".edd-repeater-content").hide(),e(document).on("click touchend",".edd-repeater[data-repeater-collapsable] [data-repeater-collapsable-handle]",function(){var r=e(this).closest(".edd-repeater-item"),i=r.find(".edd-repeater-content").first(),a=r.hasClass("opened")?"closing":"opening";"opening"==a?(i.stop().slideDown(),r.addClass("opened"),r.removeClass("closed"),t(),n()):(i.stop().slideUp(),r.addClass("closed"),r.removeClass("opened"))}),e(document).on("keyup change",'.edd-repeater .edd-repeater-content td:first-of-type *[type!="hidden"]',function(){if(""!==e(this).val())e(this).closest(".edd-repeater-item").find(".repeater-header h2 span.title").html(e(this).val());else{var t=e(this).closest(".edd-repeater-item").find(".repeater-header h2").data("repeater-collapsable-default");e(this).closest(".edd-repeater-item").find(".repeater-header h2 span.title").html(t)}})})}}(jQuery);var maybeLoadSelect2=function(){var e,t;if("undefined"==typeof Select2||null===Select2)return e=document.createElement("script"),e.type="text/javascript",e.id="edd-fields-select2-js",e.src="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/js/select2.full.min.js",t=document.createElement("link"),t.rel="stylesheet",t.media="all",t.id="edd-fields-select2-css",t.href="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/css/select2.min.css",document.body.appendChild(e),document.body.appendChild(t),!1};window.addEventListener?window.addEventListener("load",maybeLoadSelect2,!1):window.attachEvent&&window.attachEvent("onload",maybeLoadSelect2),function(e){e(document).ready(function(){e(".edd-fields-tabs").length>0&&(e(".edd-fields-meta-box .hidden").removeClass("hidden"),e(".edd-fields-meta-box").tabs({active:"custom"}))})}(jQuery);
//# sourceMappingURL=admin.js.map
