jQuery(function(e){function t(){var t,a=[];location.origin||(location.origin=location.protocol+"//"+location.host),t=location.origin+ajaxurl;var n=function(){var a;return e.ajax({async:!1,type:"POST",url:t,data:{action:"edd_fields_get_posts",current_post_type:typenow},success:function(t){a=e.parseJSON(t)},error:function(e){a=[{text:"Error. See Browser Console.",value:""}],console.error(e)}}),a}();return a=n}function a(t){var a,n=[];if(n.push({text:"Choose a Field Name",value:""}),void 0!==t&&""!==t){location.origin||(location.origin=location.protocol+"//"+location.host),a=location.origin+ajaxurl;var o=function(){var n;return e.ajax({async:!1,type:"POST",url:a,data:{action:"edd_fields_get_names",post_id:t},success:function(t){n=e.parseJSON(t)},error:function(e){n=[{text:"Error. See Browser Console.",value:""}],console.error(e)}}),n}();n=o}else e(".edd-fields-meta-box .ui-tabs-panel:visible tbody tr .edd-fields-key input").each(function(t,a){n.push({text:e(a).val(),value:e(a).val()})});if(0==e(".edd-fields-names option").length)return n;e(".edd-fields-names").empty();for(var i="",s=0;s<n.length;s++)i+='<option value="'+n[s].value+'">'+n[s].text+"</option>";e(".edd-fields-names").html(i)}e(document).ready(function(){tinymce.PluginManager.add("edd_fields_shortcodes_script",function(n,o){n.addButton("edd_fields_shortcodes",{text:"EDD Fields",icon:!1,type:"menubutton",menu:[{text:"Create Fields Table",onclick:function(){n.windowManager.open({title:"Add Fields Table",body:[{type:"select",name:"id",label:"Using This Post's Data:",values:t()},{type:"textbox",name:"class",label:"Wrapper Class (Optional)"}],onsubmit:function(e){n.insertContent("[edd_fields_table"+(void 0!==e.data.id?' post_id="'+e.data.id+'"':"")+(void 0!==e.data["class"]?' class="'+e.data["class"]+'"':"")+"]")}})}},{text:"Get Field Value",onclick:function(){n.windowManager.open({title:"Retrieve a Field's Value by Name",body:[{type:"select",name:"id",label:"Using This Post's Data:",classes:"edd-fields-get-names",values:t()},{type:"select",name:"name",label:"Field Name",classes:"edd-fields-names",values:a(void 0)}],onPostRender:function(t){e(".edd-fields-get-names").on("change",function(t){a(e(this).val())})},onsubmit:function(e){n.insertContent("[edd_field"+(void 0!==e.data.id?' post_id="'+e.data.id+'"':"")+(void 0!==e.data.name?' name="'+e.data.name+'"':"")+"]")}})}}]})})})});