!function(e){function t(){var t,n=[];location.origin||(location.origin=location.protocol+"//"+location.host),t=location.origin+ajaxurl;var o=function(){var n;return e.ajax({async:!1,type:"POST",url:t,data:{action:"edd_fields_get_posts",current_post_type:typenow},success:function(t){n=e.parseJSON(t)},error:function(e){n=[{text:"Error. See Browser Console.",value:""}],console.error(e)}}),n}();return n=o}function n(t){var n,o=[];if(o.push({text:a.chooseFieldName,value:""}),void 0!==t&&""!==t){location.origin||(location.origin=location.protocol+"//"+location.host),n=location.origin+ajaxurl;var i=function(){var o;return e.ajax({async:!1,type:"POST",url:n,data:{action:"edd_fields_get_names",post_id:t},success:function(t){o=e.parseJSON(t)},error:function(e){o=[{text:"Error. See Browser Console.",value:""}],console.error(e)}}),o}();o=i}else e("#edd_fields_meta_box .edd-fields-template:visible tbody tr .edd-fields-key input").each(function(t,n){o.push({text:e(n).val(),value:e(n).val()})});if(0==e(".tinymce-edd-fields-names option").length)return o;e(".tinymce-edd-fields-names").empty();for(var d="",s=0;s<o.length;s++)d+='<option value="'+o[s].value+'">'+o[s].text+"</option>";e(".tinymce-edd-fields-names").html(d)}function o(){e(".edd-fields-posts").each(function(t,n){var o=e(n).attr("style");e(n).on("chosen:ready",function(t,a){e(n).hide(),e(n).next(".chosen-container").attr("style",o)}).chosen({inherit_select_classes:!0,placeholder_text_single:edd_vars.one_option,placeholder_text_multiple:edd_vars.one_or_more_option})})}var a=eddFields.i18n||{};e(document).ready(function(){tinymce.PluginManager.add("edd_fields_shortcodes_script",function(i,d){i.addButton("edd_fields_shortcodes",{text:a.eddFields,icon:!1,type:"menubutton",menu:[{text:a.createFieldsTable,onclick:function(){i.windowManager.open({title:"Add Fields Table",body:[{type:"rbmselect",name:"id",label:a.usingThisPostsData+":",classes:"edd-fields-posts edd-select edd-select-chosen",values:t()},{type:"textbox",name:"class",label:a.wrapperClassOptional}],onPostRender:function(e){setTimeout(function(){o()},100)},onsubmit:function(e){i.insertContent("[edd_fields_table"+(void 0!==e.data.id&&""!==e.data.id?' post_id="'+e.data.id+'"':"")+(void 0!==e.data["class"]&&""!==e.data["class"]?' class="'+e.data["class"]+'"':"")+"]")}})}},{text:a.getFieldValue,onclick:function(){i.windowManager.open({title:a.retrieveFieldValueByName,body:[{type:"rbmselect",name:"id",label:a.usingThisPostsData+":",classes:"edd-select edd-select-chosen edd-fields-posts edd-fields-get-names",values:t()},{type:"rbmselect",name:"name",label:a.fieldName,classes:"tinymce-edd-fields-names",values:n(void 0)}],onPostRender:function(t){setTimeout(function(){o()},100),e(".edd-fields-get-names").on("change",function(t){n(e(this).val())})},onsubmit:function(e){i.insertContent("[edd_field"+(void 0!==e.data.id&&""!==e.data.id?' post_id="'+e.data.id+'"':"")+(void 0!==e.data.name&&""!==e.data.name?' name="'+e.data.name+'"':"")+"]")}})}}]})})})}(jQuery);